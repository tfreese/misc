<?xml version="1.0" encoding="UTF-8"?>
<!-- 
  ~ ModeShape (http://www.modeshape.org)
  ~
  ~ See the COPYRIGHT.txt file distributed with this work for information
  ~ regarding copyright ownership.  Some portions may be licensed
  ~ to Red Hat, Inc. under one or more contributor license agreements.
  ~ See the AUTHORS.txt file in the distribution for a full listing of 
  ~ individual contributors.
  ~
  ~ ModeShape is free software. Unless otherwise indicated, all code in ModeShape
  ~ is licensed to you under the terms of the GNU Lesser General Public License as
  ~ published by the Free Software Foundation; either version 2.1 of
  ~ the License, or (at your option) any later version.
  ~
  ~ ModeShape is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
  ~ or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Lesser General Public License
  ~ for more details.
  ~
  ~ You should have received a copy of the GNU Lesser General Public License
  ~ along with this distribution; if not, write to:
  ~ Free Software Foundation, Inc.
  ~ 51 Franklin Street, Fifth Floor
  ~ Boston, MA  02110-1301  USA
  -->
<configuration xmlns:mode="http://www.modeshape.org/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0">

    <mode:sources jcr:primaryType="nt:unstructured"> <!-- org.modeshape.connector.disk.DiskSource -->

        <mode:source jcr:name="test" mode:classname="org.modeshape.connector.store.jpa.JpaSource"
        	mode:model="Simple"
        	mode:dialect="org.hibernate.dialect.HSQLDialect"
        	mode:driverClassName="org.hsqldb.jdbcDriver"
        	mode:username="sa"
        	mode:password=""
        	mode:url="jdbc:hsqldb:file:D:/hsqldb/test/test;create=true"
        	mode:maximumConnectionsInPool="1"
        	mode:referentialIntegrityEnforced="true"
        	mode:largeValueSizeInBytes="10000"
        	mode:retryLimit="3"
        	mode:compressData="false"
        	mode:predefinedWorkspaceNames="workspace"
        	mode:showSql="false"
            mode:autoGenerateSchema="update"
            mode:creatingWorkspacesAllowed="true"
            mode:defaultWorkspaceName="workspace"/>

        <mode:source jcr:name="all">
            <mode:classname>org.modeshape.graph.connector.federation.FederatedRepositorySource</mode:classname>
            <mode:workspaces>
                <mode:workspace jcr:name="virtual">
                    <mode:projections>
                        <mode:projection jcr:name="test projection" mode:source="test" mode:workspaceName="workspace">
                            <mode:projectionRules>/all/test => /test</mode:projectionRules>
                        </mode:projection>
                    </mode:projections>
                </mode:workspace>
            </mode:workspaces>
        </mode:source>
    </mode:sources>

    <mode:sequencers>
        <!--mode:sequencer jcr:name="Image Sequencer" mode:classname="org.modeshape.sequencer.image.ImageMetadataSequencer">
            <mode:description>Image metadata sequencer</mode:description>        
            <mode:pathExpression>/foo/source => /foo/target</mode:pathExpression>
            <mode:pathExpression>/bar/source => /bar/target</mode:pathExpression>
        </mode:sequencer-->
    </mode:sequencers>

    <mode:mimeTypeDetectors>
        <mode:mimeTypeDetector jcr:name="Detector">
            <mode:description>Standard extension-based MIME type detector</mode:description>        
            <mode:classname>org.modeshape.graph.mimetype.ExtensionBasedMimeTypeDetector</mode:classname>
        </mode:mimeTypeDetector>
    </mode:mimeTypeDetectors>

    <mode:repositories>
        <mode:repository jcr:name="test">
            <mode:source>test</mode:source>
        </mode:repository>

        <mode:repository jcr:name="all">
            <mode:source>all</mode:source>
        </mode:repository>
    </mode:repositories>
</configuration>
